name: Teleconsole SSH

on: [push, workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Install Teleconsole
      run: |
        sudo apt update
        sudo apt install -y wget
        wget https://github.com/gravitational/teleconsole/releases/download/v0.4.0/teleconsole_0.4.0_amd64.deb
        sudo dpkg -i teleconsole_0.4.0_amd64.deb || sudo apt -f install -y
    - name: Start Teleconsole Session
      run: |
        teleconsole > session.txt 2>&1 &
        sleep 10
        cat session.txt
    - name: Keep alive
      run: timeout 6h tail -f /dev/null
